Project ThemeFlight {
  database_type: 'PostgreSQL'
  note: 'ThemeFlight Database Design'
}

enum theme_status {
  ACTIVATED
  SCHEDULED
  NOT_READY
}

enum webhook_type {
  THEME_CREATE
  THEME_PUBLISH
  THEME_UPDATE
}

enum webhook_status {
  ACTIVATED
  DISABLED
}

Table shops {
  id int [pk, increment]
  name varchar
  access_token varchar
  created_at timestamp [default: `now()`]
  updated_at timestamp [default: `now()`]
}

Table themes {
  id int [pk, increment]
  name varchar
  description varchar
  tags varchar
  shop_id int [not null]
  theme_store_id varchar [not null]
  status theme_status
  theme_created_at varchar
  created_at timestamp [default: `now()`]
  updated_at timestamp [default: `now()`]
}

Table schedules {
  id int [pk, increment]
  start_at timestamp
  shop_id int [not null]
  theme_id int [not null]
  created_at timestamp [default: `now()`]
  updated_at timestamp [default: `now()`]
}

Ref: shops.id < themes.shop_id
Ref: shops.id < schedules.shop_id
Ref: themes.id < schedules.theme_id

Table webhooks {
  id int [pk, increment]
  shop_id int [not null]
  type webhook_type
  status webhook_status
  created_at timestamp [default: `now()`]
  updated_at timestamp [default: `now()`]
}

Ref: shops.id < webhooks.shop_id
